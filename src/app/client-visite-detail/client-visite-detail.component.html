<div class="form">
    <h1 class="title">
        Mon assistant VRP
    </h1>
    <mat-divider></mat-divider>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div>
            <mat-form-field>
                <mat-label>Id</mat-label>
                <input matInput type="text" placeholder="Id" formControlName="id" [value]="clientVisite.id" required>
            </mat-form-field>
        </div>
        <div>
            <mat-form-field>
                <mat-label>Nom</mat-label>
                <input matInput type="text" placeholder="Nom" formControlName="nom" [value]="clientVisite.nom" required>
            </mat-form-field>
        </div>
        <div>
            <mat-form-field>
                <mat-label>Prénom</mat-label>
                <input matInput placeholder="Prénom" type="text" formControlName="prenom" [value]="clientVisite.prenom" required>
            </mat-form-field>
        </div>
        <div>
            <mat-form-field>
                <mat-label>Date</mat-label>
                <input matInput placeholder="Date" type="text" formControlName="date" [value]="clientVisite.date" required>
            </mat-form-field>
        </div>
        <div>
            <mat-form-field>
                <mat-label>Rue</mat-label>
                <input matInput type="text" placeholder="Rue" formControlName="rue" [value]="clientVisite.rue" required>
            </mat-form-field>
            <button mat-raised-button color="accent" type="button" (click)="getAdresses()">
                <mat-icon>search</mat-icon>
            </button>
        </div>
        <div>
            <mat-form-field>
                <mat-label>Label adresse</mat-label>
                <input matInput type="text" placeholder="Adresse complet" formControlName="label" [value]="clientVisite.label" required>
            </mat-form-field>
        </div>
        <div *ngIf="addActive" class="matList">

            <mat-selection-list #adresse [multiple]="false">
                @for (adresse of adressesProperties | async; track adresse) {
                <mat-list-option [value]="adresse">{{adresse}}</mat-list-option>
                }
            </mat-selection-list>
            <p>
                Option selected: {{adresse.selectedOptions.hasValue() ? adresse.selectedOptions.selected[0].value : 'None'}}
            </p>
            <button mat-raised-button color="accent" type="button" (click)="getCoordonnesGPS(adresse.selectedOptions.selected[0].value)">
                <mat-icon>search</mat-icon>
            </button>

        </div>
        <div>
            <mat-form-field>
                <mat-label>Latitude</mat-label>
                <input matInput type="text" placeholder="Latitude" formControlName="latitude" [value]="clientVisite.latitude" required>
            </mat-form-field>
        </div>
        <div>
            <mat-form-field>
                <mat-label>Longitude</mat-label>
                <input matInput type="text" placeholder="Longitude" formControlName="longitude" [value]="clientVisite.longitude" required>
            </mat-form-field>
        </div>
        <div>
            <mat-form-field>
                <mat-label>Ville</mat-label>
                <input matInput placeholder="Ville" type="text" formControlName="ville" [value]="clientVisite.ville" required>
            </mat-form-field>
        </div>


        <div>
            <button *ngIf="removeActive" mat-raised-button mat-mini-fab color="warn" type="button" (click)="remove(clientVisite)"><mat-icon>delete</mat-icon></button>

            <button *ngIf="editActive" mat-raised-button color="accent" type="button" (click)="edit()">
                <mat-icon>edit</mat-icon>
            </button>

            <button *ngIf="addActive" mat-raised-button color="primary" type="button" mat-mini-fab color="primary" (click)="onSubmit()">
                <mat-icon>save</mat-icon>
            </button>

        </div>
    </form>
</div>